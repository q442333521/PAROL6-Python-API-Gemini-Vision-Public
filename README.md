# PAROL6 æ™ºèƒ½æœºæ¢°è‡‚æ§åˆ¶ç³»ç»Ÿ - ä¸­æ–‡ä½¿ç”¨è¯´æ˜

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªåŸºäº Gemini Vision AI çš„ PAROL6 æœºæ¢°è‡‚æ™ºèƒ½æ§åˆ¶ç³»ç»Ÿï¼Œèƒ½å¤Ÿé€šè¿‡è‡ªç„¶è¯­è¨€å’Œè§†è§‰è¯†åˆ«å®ç°æœºå™¨äººçš„è‡ªåŠ¨åŒ–æ“ä½œã€‚è¯¥ç³»ç»Ÿå°†ä¼ ç»Ÿçš„ GUI æ§åˆ¶æ–¹å¼è½¬å˜ä¸ºå¯ç¼–ç¨‹çš„ç ”ç©¶çº§å¹³å°ï¼Œæ”¯æŒè§†è§‰å¼•å¯¼æ“ä½œå’Œè‡ªç„¶è¯­è¨€æ§åˆ¶ã€‚

### æ ¸å¿ƒç‰¹æ€§
- âœ… **è‡ªç„¶è¯­è¨€æ§åˆ¶**ï¼šæ”¯æŒæ–‡æœ¬å’Œè¯­éŸ³è¾“å…¥
- âœ… **è§†è§‰è¯†åˆ«**ï¼šé›†æˆ Intel RealSense D435I æ·±åº¦ç›¸æœº
- âœ… **AI é©±åŠ¨**ï¼šä½¿ç”¨ Google Gemini 2.5 Flash è§†è§‰æ¨¡å‹
- âœ… **ç²¾ç¡®æ§åˆ¶**ï¼šæ¯«ç±³çº§å®šä½ç²¾åº¦
- âœ… **è¿œç¨‹æ“ä½œ**ï¼šUDP å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„
- âœ… **å®‰å…¨ä¿æŠ¤**ï¼šå¤šå±‚å®‰å…¨æ£€æŸ¥å’Œæ€¥åœç›‘æ§

---

## ğŸ”§ ç³»ç»Ÿæ¶æ„

### ä¸‰å±‚æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·äº¤äº’å±‚ (é¡¶å±‚)                          â”‚
â”‚  - è‡ªç„¶è¯­è¨€è¾“å…¥ï¼ˆæ–‡æœ¬/è¯­éŸ³ï¼‰                                    â”‚
â”‚  - Gemini AI ç†è§£å’Œè§„åˆ’                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   è§†è§‰å¤„ç†å±‚ (ä¸­å±‚)                           â”‚
â”‚  - RealSense æ·±åº¦ç›¸æœº                                        â”‚
â”‚  - ç‰©ä½“æ£€æµ‹å’Œ3Då®šä½                                           â”‚
â”‚  - æ‰‹çœ¼æ ‡å®š                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  æœºå™¨äººæ§åˆ¶å±‚ (åº•å±‚)                          â”‚
â”‚  - UDP æœåŠ¡å™¨ï¼ˆheadless_commander.pyï¼‰                       â”‚
â”‚  - è¿åŠ¨å­¦è®¡ç®—å’Œè½¨è¿¹è§„åˆ’                                       â”‚
â”‚  - ä¸²å£é€šä¿¡å’Œå®æ—¶æ§åˆ¶ (100Hz)                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ–‡ä»¶ç»“æ„
```
PAROL6-Python-API-Gemini-Vision-Public/
â”œâ”€â”€ Headless/
â”‚   â”œâ”€â”€ headless_commander.py      # æœºå™¨äººæ§åˆ¶æœåŠ¡å™¨
â”‚   â”œâ”€â”€ robot_api.py                # å®¢æˆ·ç«¯ APIï¼ˆ30+ æ§åˆ¶å‡½æ•°ï¼‰
â”‚   â”œâ”€â”€ smooth_motion.py            # å¹³æ»‘è½¨è¿¹ç”Ÿæˆ
â”‚   â”œâ”€â”€ PAROL6_ROBOT.py             # æœºå™¨äººå‚æ•°é…ç½®
â”‚   â”œâ”€â”€ Gemini/
â”‚   â”‚   â”œâ”€â”€ gemini.py               # Gemini AI æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ robot_vision_tools.py   # è§†è§‰å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ bounding_box_model.py   # ç‰©ä½“æ£€æµ‹æ¨¡å‹
â”‚   â”‚   â””â”€â”€ supplementary_functions.py  # è¾…åŠ©åŠŸèƒ½
â”‚   â””â”€â”€ Vision/
â”‚       â”œâ”€â”€ vision_controller.py    # è§†è§‰å¤„ç†æ§åˆ¶å™¨
â”‚       â”œâ”€â”€ calibrate_hand_eye.py   # æ‰‹çœ¼æ ‡å®š
â”‚       â””â”€â”€ validate_calibration.py # æ ‡å®šéªŒè¯
â”œâ”€â”€ README.md                       # è‹±æ–‡é¡¹ç›®è¯´æ˜
â”œâ”€â”€ API-Specific-README.md          # API è¯¦ç»†æ–‡æ¡£
â””â”€â”€ ä¸­æ–‡ä½¿ç”¨è¯´æ˜.md                  # æœ¬æ–‡æ¡£
```

---

## ğŸ“¥ è¾“å…¥ä¸è¾“å‡º

### è¾“å…¥
| è¾“å…¥ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|---------|------|------|
| **è‡ªç„¶è¯­è¨€å‘½ä»¤** | æ–‡æœ¬æˆ–è¯­éŸ³æè¿°ä»»åŠ¡ | "è¯·æŠ“å–çº¢è‰²çš„æ–¹å—å¹¶æ”¾åˆ°è“è‰²ç›’å­é‡Œ" |
| **è§†è§‰æ•°æ®** | RealSense D435I æ·±åº¦ç›¸æœº | RGB-D å›¾åƒæµï¼ˆ640Ã—480 @ 30fpsï¼‰|
| **API è°ƒç”¨** | Python å‡½æ•°ç›´æ¥æ§åˆ¶ | `move_robot_joints([90, -45, 90, 0, 45, 180])` |
| **å…³èŠ‚è§’åº¦** | 6ä¸ªå…³èŠ‚çš„è§’åº¦å€¼ï¼ˆåº¦ï¼‰ | `[0, -90, 180, 0, 0, 180]` |
| **ç¬›å¡å°”åæ ‡** | ä½ç½®å’Œå§¿æ€ (mm å’Œåº¦) | `[250, 0, 200, 180, 0, 90]` |

### è¾“å‡º
| è¾“å‡ºç±»å‹ | è¯´æ˜ | ç²¾åº¦ |
|---------|------|------|
| **å…³èŠ‚è¿åŠ¨** | 6è½´åè°ƒè¿åŠ¨ | Â±0.1Â° |
| **ç¬›å¡å°”è¿åŠ¨** | ç›´çº¿/æ›²çº¿è·¯å¾„ | Â±1mm |
| **å¤¹çˆªæ§åˆ¶** | å¼€åˆå’ŒåŠ›æ§åˆ¶ | 0-255 çº§ä½ç½® |
| **çŠ¶æ€åé¦ˆ** | ä½ç½®ã€é€Ÿåº¦ã€IOçŠ¶æ€ | å®æ—¶æ›´æ–° |
| **è§†è§‰ä¿¡æ¯** | ç‰©ä½“3Dä½ç½®å’Œæ–¹å‘ | æ¯«ç±³çº§ç²¾åº¦ |
| **è¯­éŸ³/æ–‡æœ¬åé¦ˆ** | AI å“åº”å’ŒçŠ¶æ€æŠ¥å‘Š | è‡ªç„¶è¯­è¨€ |

---

## ğŸ¯ ä¸»è¦åŠŸèƒ½

### 1. åŸºç¡€è¿åŠ¨æ§åˆ¶
- **å…³èŠ‚è¿åŠ¨** (`move_robot_joints`): æ§åˆ¶6ä¸ªå…³èŠ‚åˆ°æŒ‡å®šè§’åº¦
- **ä½ç½®è¿åŠ¨** (`move_robot_pose`): ç§»åŠ¨åˆ°ç¬›å¡å°”åæ ‡ä½ç½®
- **ç¬›å¡å°”ç›´çº¿** (`move_robot_cartesian`): ä¿è¯ç›´çº¿è·¯å¾„è¿åŠ¨
- **ç‚¹åŠ¨æ§åˆ¶** (`jog_robot_joint`, `jog_cartesian`): æ‰‹åŠ¨å¾®è°ƒä½ç½®

### 2. é«˜çº§å¹³æ»‘è¿åŠ¨
- **åœ†å½¢è½¨è¿¹** (`smooth_circle`): åœ¨æŒ‡å®šå¹³é¢ç”»åœ†
- **åœ†å¼§è¿åŠ¨** (`smooth_arc_center`, `smooth_arc_parametric`): ç²¾ç¡®åœ†å¼§è·¯å¾„
- **æ ·æ¡æ›²çº¿** (`smooth_spline`): é€šè¿‡å¤šä¸ªè·¯ç‚¹çš„å¹³æ»‘æ›²çº¿
- **èºæ—‹è¿åŠ¨** (`smooth_helix`): èºæ—‹å¼è¿åŠ¨è·¯å¾„
- **æ··åˆè¿åŠ¨** (`smooth_blend`): å¤šæ®µè¿åŠ¨å¹³æ»‘è¡”æ¥

### 3. è§†è§‰å¼•å¯¼æ“ä½œ
- **ç‰©ä½“æ£€æµ‹**: ä½¿ç”¨ Gemini Vision AI è¯†åˆ«ç‰©ä½“
- **3D å®šä½**: æ·±åº¦ç›¸æœºè·å–ç‰©ä½“ç©ºé—´åæ ‡
- **æ™ºèƒ½æŠ“å–**: è‡ªåŠ¨è§„åˆ’æŠ“å–å§¿æ€å’Œè·¯å¾„
- **ç²¾ç¡®æ”¾ç½®**: è§†è§‰å¼•å¯¼çš„æ”¾ç½®æ“ä½œ
- **æ‰‹çœ¼æ ‡å®š**: ChArUco æ ‡å®šæ¿æ ‡å®šç³»ç»Ÿ

### 4. å¤¹çˆªæ§åˆ¶
- **ç”µåŠ¨å¤¹çˆª**: ä½ç½®ã€é€Ÿåº¦ã€åŠ›æ§åˆ¶ (0-255)
- **æ°”åŠ¨å¤¹çˆª**: å¼€/åˆæ§åˆ¶ï¼ˆæ•°å­—è¾“å‡ºç«¯å£ï¼‰
- **ç‰©ä½“æ£€æµ‹**: å¤¹çˆªçŠ¶æ€åé¦ˆ

### 5. è‡ªç„¶è¯­è¨€æ§åˆ¶
- **æ–‡æœ¬æ¨¡å¼**: é€æ­¥æ–‡æœ¬å‘½ä»¤æ§åˆ¶
- **è¯­éŸ³æ¨¡å¼**: æŒ‰ä½ç©ºæ ¼é”®è¯­éŸ³è¾“å…¥
- **è‡ªä¸»æ¨¡å¼**: AI è‡ªåŠ¨åˆ†è§£å¤æ‚ä»»åŠ¡
- **ç»„åˆåŠŸèƒ½**: å¤šæ­¥éª¤æ“ä½œè‡ªåŠ¨æ‰§è¡Œ

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

#### æœåŠ¡å™¨ç«¯ï¼ˆè¿æ¥æœºå™¨äººçš„ç”µè„‘ï¼‰
```bash
# æ ¸å¿ƒä¾èµ–
pip3 install roboticstoolbox-python==1.0.3
pip3 install numpy==1.23.4
pip3 install scipy==1.11.4
pip3 install spatialmath

# ä¸²å£å’Œè®¡æ—¶
pip3 install pyserial
pip3 install oclock
pip3 install keyboard

# è§†è§‰å¤„ç†
pip3 install pyrealsense2
pip3 install opencv-python

# Gemini AI
pip3 install google-genai
pip3 install python-dotenv

# éŸ³é¢‘å¤„ç†ï¼ˆå¯é€‰ï¼Œç”¨äºè¯­éŸ³è¾“å…¥ï¼‰
pip3 install pyaudio
```

#### å®¢æˆ·ç«¯ï¼ˆä»»æ„ç”µè„‘ï¼‰
```bash
# ä»…éœ€è¦æ ‡å‡†åº“ï¼Œå¦‚æœéœ€è¦å§¿æ€çŸ©é˜µåŠŸèƒ½ï¼š
pip3 install numpy==1.23.4
pip3 install spatialmath
```

### é…ç½® API å¯†é’¥

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š
```bash
GEMINI_API_KEY=ä½ çš„_Gemini_API_å¯†é’¥
```

è·å– API å¯†é’¥: https://makersuite.google.com/app/apikey

---

## ğŸ“– ä½¿ç”¨æ–¹æ³•

### æ–¹å¼ä¸€ï¼šè‡ªç„¶è¯­è¨€æ§åˆ¶ï¼ˆæ¨èï¼‰

#### 1. å¯åŠ¨æœºå™¨äººæ§åˆ¶æœåŠ¡å™¨
```bash
cd Headless
python headless_commander.py
```
ç­‰å¾…æç¤ºï¼š`âœ“ Robot ready` å’Œ `Listening for commands on port 5001`

#### 2. å¯åŠ¨ Gemini AI æ§åˆ¶å™¨

**æ–‡æœ¬æ¨¡å¼**ï¼ˆæ¨èæ–°æ‰‹ï¼‰:
```bash
cd Headless/Gemini
python gemini.py --mode text
```

**è‡ªä¸»æ¨¡å¼**ï¼ˆå¤æ‚ä»»åŠ¡ï¼‰:
```bash
python gemini.py --mode autonomous
```

**è¯­éŸ³è¾“å…¥æ¨¡å¼**:
```bash
python gemini.py --mode text --input audio
```

#### 3. å‘é€å‘½ä»¤ç¤ºä¾‹

**æ–‡æœ¬æ¨¡å¼ä¸‹çš„å‘½ä»¤ç¤ºä¾‹ï¼š**
```
ä½ : è¯·å‘å‰ç§»åŠ¨ 50mm
AI: [æ‰§è¡Œç§»åŠ¨å¹¶ç¡®è®¤]

ä½ : æŠ“å–çº¢è‰²çš„æ–¹å—
AI: [æ£€æµ‹ç‰©ä½“ â†’ è§„åˆ’è·¯å¾„ â†’ æŠ“å–]

ä½ : æŠŠå®ƒæ”¾åˆ°è“è‰²ç›’å­é‡Œ
AI: [ç§»åŠ¨åˆ°ç›®æ ‡ â†’ æ”¾ç½® â†’ æ¾å¼€]
```

**è‡ªä¸»æ¨¡å¼ä¸‹çš„å¤æ‚ä»»åŠ¡ï¼š**
```
ä½ : æ¸…ç†æ¡Œé¢ä¸Šæ‰€æœ‰çš„çº¢è‰²ç‰©ä½“ï¼ŒæŠŠå®ƒä»¬æ”¾åˆ°ç»¿è‰²å®¹å™¨é‡Œ
AI: [è‡ªåŠ¨æ‰§è¡Œ]
    1. æ‰«ææ£€æµ‹æ‰€æœ‰çº¢è‰²ç‰©ä½“
    2. é€ä¸ªæŠ“å–
    3. æ”¾ç½®åˆ°å®¹å™¨
    4. è¿”å›æ£€æµ‹æ›´å¤šç‰©ä½“
    5. å®Œæˆå¹¶æŠ¥å‘Š
```

---

### æ–¹å¼äºŒï¼šPython API ç¼–ç¨‹

åˆ›å»ºæ§åˆ¶è„šæœ¬ `my_control.py`:

```python
from Headless.robot_api import *

# 1. æœºå™¨äººå›é›¶
home_robot()

# 2. ç§»åŠ¨åˆ°æŒ‡å®šå…³èŠ‚è§’åº¦ï¼ˆ5.5ç§’å®Œæˆï¼‰
move_robot_joints([90, -45, 90, 0, 45, 180], duration=5.5)

# 3. ç§»åŠ¨åˆ°ç¬›å¡å°”åæ ‡ï¼ˆä½ç½®ï¼šx,y,z å§¿æ€ï¼šRx,Ry,Rzï¼‰
move_robot_pose([250, 0, 200, 180, 0, 90], speed_percentage=50)

# 4. ç›´çº¿è¿åŠ¨åˆ°ç›®æ ‡ç‚¹
move_robot_cartesian([200, -50, 180, 180, 0, 135], duration=4.0)

# 5. ç”»åœ†ï¼ˆä¸­å¿ƒç‚¹ï¼ŒåŠå¾„ï¼Œå¹³é¢ï¼Œæ—¶é—´ï¼‰
smooth_circle(center=[200, 0, 200], radius=50, plane='XY', duration=5.0)

# 6. æ§åˆ¶å¤¹çˆª
control_electric_gripper(action='open')
control_electric_gripper(action='move', position=200, speed=150)

# 7. æŸ¥è¯¢çŠ¶æ€
pose = get_robot_pose()
print(f"å½“å‰ä½ç½®: {pose}")

angles = get_robot_joint_angles()
print(f"å½“å‰å…³èŠ‚è§’åº¦: {angles}")

# 8. æ‰§è¡Œè½¨è¿¹
trajectory = [
    [200, 0, 200, 0, 0, 0],
    [250, 50, 200, 0, 0, 45],
    [200, 100, 200, 0, 0, 90]
]
execute_trajectory(trajectory, timing_mode='duration',
                   timing_value=10.0, motion_type='spline')
```

è¿è¡Œï¼š
```bash
python my_control.py
```

---

### æ–¹å¼ä¸‰ï¼šè§†è§‰å¼•å¯¼æŠ“å–

ä½¿ç”¨è§†è§‰å·¥å…·è¿›è¡Œæ™ºèƒ½æŠ“å–ï¼š

```python
from Headless.Gemini.robot_vision_tools import RobotVisionTools
from Headless.Vision.vision_controller import VisionController

# åˆå§‹åŒ–è§†è§‰ç³»ç»Ÿ
vision = VisionController()
vision.start()

robot_vision = RobotVisionTools(vision)

# æ™ºèƒ½æŠ“å–æµç¨‹
result = robot_vision.pick_object(
    object_description="çº¢è‰²çš„ç«‹æ–¹ä½“",
    approach_style="vertical"  # å‚ç›´æŠ“å–
)

if result['success']:
    # æ”¾ç½®åˆ°æŒ‡å®šä½ç½®
    robot_vision.place_at_position(
        target_position=[300, 100, 50],  # ç›®æ ‡ä½ç½®
        approach_height=50  # æ¥è¿‘é«˜åº¦
    )
```

---

## ğŸ” è¯¦ç»† API è¯´æ˜

### åŸºç¡€è¿åŠ¨å‘½ä»¤

#### 1. å…³èŠ‚è¿åŠ¨
```python
move_robot_joints(
    joint_angles=[90, -45, 90, 0, 45, 180],  # 6ä¸ªå…³èŠ‚è§’åº¦ï¼ˆåº¦ï¼‰
    duration=5.0,              # è¿åŠ¨æ—¶é—´ï¼ˆç§’ï¼‰
    # æˆ–è€…ä½¿ç”¨é€Ÿåº¦æ§åˆ¶ï¼š
    # speed_percentage=75,     # é€Ÿåº¦ç™¾åˆ†æ¯” (0-100)
    wait_for_ack=True,         # ç­‰å¾…å®Œæˆç¡®è®¤
    timeout=10.0               # è¶…æ—¶æ—¶é—´
)
```

#### 2. ç¬›å¡å°”ä½ç½®è¿åŠ¨
```python
move_robot_pose(
    pose=[250, 0, 200, 180, 0, 90],  # [x, y, z, Rx, Ry, Rz]
    speed_percentage=50,              # é€Ÿåº¦ç™¾åˆ†æ¯”
    wait_for_ack=True
)
```

#### 3. ç›´çº¿è¿åŠ¨ï¼ˆä¿è¯è·¯å¾„ï¼‰
```python
move_robot_cartesian(
    pose=[200, -50, 180, 180, 0, 135],
    duration=4.0
)
```

#### 4. ç‚¹åŠ¨æ§åˆ¶
```python
# å•å…³èŠ‚ç‚¹åŠ¨
jog_robot_joint(
    joint_index=0,        # å…³èŠ‚ç´¢å¼• (0-5æ­£å‘, 6-11è´Ÿå‘)
    speed_percentage=40,
    duration=2.0          # æ—¶é—´
    # æˆ–è€…ï¼šdistance_deg=15  # è§’åº¦
)

# å¤šå…³èŠ‚åŒæ—¶ç‚¹åŠ¨
jog_multiple_joints(
    joints=[0, 3, 5],          # å…³èŠ‚åˆ—è¡¨
    speeds=[70, 40, 60],       # å¯¹åº”é€Ÿåº¦
    duration=1.2
)

# ç¬›å¡å°”ç‚¹åŠ¨
jog_cartesian(
    frame='TRF',              # 'TRF'å·¥å…·åæ ‡ç³» æˆ– 'WRF'ä¸–ç•Œåæ ‡ç³»
    axis='Z+',                # 'X+', 'X-', 'Y+', 'Y-', 'Z+', 'Z-'
    speed_percentage=50,
    duration=1.5
)
```

### é«˜çº§å¹³æ»‘è¿åŠ¨

#### 1. åœ†å½¢è½¨è¿¹
```python
smooth_circle(
    center=[200, 0, 200],    # åœ†å¿ƒåæ ‡ (mm)
    radius=50,               # åŠå¾„ (mm)
    plane='XY',              # å¹³é¢: 'XY', 'XZ', 'YZ'
    duration=5.0,
    clockwise=False          # é¡ºæ—¶é’ˆ/é€†æ—¶é’ˆ
)
```

#### 2. åœ†å¼§è¿åŠ¨ï¼ˆä¸­å¿ƒç‚¹å®šä¹‰ï¼‰
```python
smooth_arc_center(
    end_pose=[250, 50, 200, 0, 0, 90],  # ç»ˆç‚¹å§¿æ€
    center=[200, 0, 200],                # åœ†å¼§ä¸­å¿ƒ
    duration=3.0
)
```

#### 3. åœ†å¼§è¿åŠ¨ï¼ˆå‚æ•°å®šä¹‰ï¼‰
```python
smooth_arc_parametric(
    end_pose=[250, 50, 200, 0, 0, 90],
    radius=50,           # åŠå¾„ (mm)
    arc_angle=90,        # åœ†å¼§è§’åº¦ (åº¦)
    duration=3.0
)
```

#### 4. æ ·æ¡æ›²çº¿
```python
waypoints = [
    [200, 0, 100, 0, 0, 0],
    [250, 50, 150, 0, 15, 45],
    [200, 100, 200, 0, 30, 90]
]
smooth_spline(waypoints, duration=8.0)
```

#### 5. èºæ—‹è¿åŠ¨
```python
smooth_helix(
    center=[200, 0, 150],   # èºæ—‹ä¸­å¿ƒ
    radius=30,              # åŠå¾„
    pitch=20,               # èºè·ï¼ˆæ¯åœˆé«˜åº¦ï¼‰
    height=100,             # æ€»é«˜åº¦
    duration=10.0
)
```

#### 6. æ··åˆè¿åŠ¨ï¼ˆå¤šæ®µè¡”æ¥ï¼‰
```python
segments = [
    {'type': 'LINE', 'end': [250, 0, 200, 0, 0, 0], 'duration': 2.0},
    {'type': 'CIRCLE', 'center': [250, 0, 200], 'radius': 50,
     'plane': 'XY', 'duration': 4.0},
    {'type': 'LINE', 'end': [200, 0, 200, 0, 0, 0], 'duration': 2.0}
]
smooth_blend(segments, blend_time=0.5, duration=10.0)
```

### å¤¹çˆªæ§åˆ¶

#### ç”µåŠ¨å¤¹çˆª
```python
# æ ¡å‡†å¤¹çˆª
control_electric_gripper(action='calibrate')

# ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®
control_electric_gripper(
    action='move',
    position=200,    # ä½ç½® (0-255)
    speed=150,       # é€Ÿåº¦ (0-255)
    current=500      # æœ€å¤§ç”µæµ (100-1000 mA)
)

# æŸ¥è¯¢å¤¹çˆªçŠ¶æ€
status = get_electric_gripper_status(verbose=True)
# è¿”å›: [ID, Position, Speed, Current, StatusByte, ObjectDetected]
```

#### æ°”åŠ¨å¤¹çˆª
```python
# æ‰“å¼€å¤¹çˆª
control_pneumatic_gripper(action='open', port=1)

# å…³é—­å¤¹çˆª
control_pneumatic_gripper(action='close', port=1)
```

### æŸ¥è¯¢å‘½ä»¤

```python
# è·å–å½“å‰ä½ç½®å§¿æ€
pose = get_robot_pose()  # è¿”å› [x, y, z, Rx, Ry, Rz]

# è·å–å½“å‰å…³èŠ‚è§’åº¦
angles = get_robot_joint_angles()  # è¿”å› 6ä¸ªè§’åº¦å€¼

# è·å–å…³èŠ‚é€Ÿåº¦
speeds = get_robot_joint_speeds()  # æ­¥/ç§’

# è·å– IO çŠ¶æ€
io_status = get_robot_io(verbose=True)
# è¿”å›: [IN1, IN2, OUT1, OUT2, ESTOP]

# æ£€æŸ¥æ˜¯å¦åœæ­¢
is_stopped = is_robot_stopped(threshold_speed=2.0)

# æ£€æŸ¥æ€¥åœçŠ¶æ€
estop = is_estop_pressed()

# è·å–å®Œæ•´çŠ¶æ€
status = get_robot_status()
# åŒ…å«: pose, angles, speeds, IO, gripper, stopped, estop
```

### è¾…åŠ©åŠŸèƒ½

```python
# å»¶æ—¶
delay_robot(2.5)  # å»¶æ—¶ 2.5 ç§’

# åœæ­¢è¿åŠ¨
stop_robot_movement()  # ç«‹å³åœæ­¢å¹¶æ¸…ç©ºå‘½ä»¤é˜Ÿåˆ—

# å›é›¶
home_robot()

# ç­‰å¾…åœæ­¢
wait_for_robot_stopped(timeout=10.0, poll_rate=0.1)

# å¸¦é‡è¯•çš„å®‰å…¨ç§»åŠ¨
safe_move_with_retry(
    move_robot_joints,
    [90, -45, 90, 0, 45, 180],
    duration=5.0,
    max_retries=3,
    retry_delay=1.0
)
```

---

## ğŸ“ å®é™…åº”ç”¨ç¤ºä¾‹

### ç¤ºä¾‹ 1: ç®€å•çš„æŠ“æ”¾ä»»åŠ¡

```python
from Headless.robot_api import *

# 1. åˆå§‹åŒ–
home_robot()

# 2. ç§»åŠ¨åˆ°è§‚å¯Ÿä½ç½®
move_robot_joints([0, -90, 180, 0, -45, 180], duration=3.0)

# 3. æ‰“å¼€å¤¹çˆª
control_electric_gripper(action='open')

# 4. ç§»åŠ¨åˆ°æŠ“å–ä½ç½®
move_robot_cartesian([200, 0, 100, 180, 0, 0], duration=2.0)

# 5. å…³é—­å¤¹çˆªæŠ“å–
control_electric_gripper(action='move', position=200, speed=100, current=500)
delay_robot(1.0)

# 6. æŠ¬èµ·
move_robot_cartesian([200, 0, 200, 180, 0, 0], duration=2.0)

# 7. ç§»åŠ¨åˆ°æ”¾ç½®ä½ç½®
move_robot_cartesian([300, 100, 200, 180, 0, 0], duration=3.0)

# 8. ä¸‹é™
move_robot_cartesian([300, 100, 110, 180, 0, 0], duration=2.0)

# 9. æ¾å¼€
control_electric_gripper(action='open')

# 10. è¿”å›å®‰å…¨ä½ç½®
home_robot()
```

### ç¤ºä¾‹ 2: ä½¿ç”¨è§†è§‰å¼•å¯¼æŠ“å–

```python
from Headless.Gemini.robot_vision_tools import RobotVisionTools
from Headless.Vision.vision_controller import VisionController

# åˆå§‹åŒ–
vision = VisionController()
vision.start()
robot_vision = RobotVisionTools(vision)

# æ‰§è¡ŒæŠ“å–åºåˆ—
objects_to_pick = ["çº¢è‰²æ–¹å—", "è“è‰²åœ†æŸ±", "ç»¿è‰²ä¸‰è§’å½¢"]

for obj_name in objects_to_pick:
    # æ£€æµ‹å¹¶æŠ“å–
    result = robot_vision.pick_object(
        object_description=obj_name,
        approach_style="vertical"
    )

    if result['success']:
        print(f"æˆåŠŸæŠ“å– {obj_name}")

        # æ”¾ç½®åˆ°åˆ†ç±»åŒºåŸŸ
        robot_vision.place_at_position(
            target_position=[300, 150, 50],
            approach_height=50
        )
        print(f"{obj_name} å·²æ”¾ç½®")
    else:
        print(f"æŠ“å– {obj_name} å¤±è´¥: {result['message']}")

vision.stop()
```

### ç¤ºä¾‹ 3: ç»˜åˆ¶å›¾æ¡ˆ

```python
from Headless.robot_api import *

# ç»˜åˆ¶æ­£æ–¹å½¢
def draw_square(center, size, height, duration):
    half_size = size / 2
    corners = [
        [center[0] + half_size, center[1] + half_size, height, 0, 0, 0],
        [center[0] - half_size, center[1] + half_size, height, 0, 0, 0],
        [center[0] - half_size, center[1] - half_size, height, 0, 0, 0],
        [center[0] + half_size, center[1] - half_size, height, 0, 0, 0],
        [center[0] + half_size, center[1] + half_size, height, 0, 0, 0]
    ]
    execute_trajectory(corners, timing_mode='duration',
                      timing_value=duration, motion_type='linear')

# ç»˜åˆ¶åœ†å½¢
def draw_circle(center, radius, height, duration):
    smooth_circle(center=[center[0], center[1], height],
                 radius=radius,
                 plane='XY',
                 duration=duration)

# æ‰§è¡Œ
home_robot()
draw_square(center=[200, 0], size=80, height=150, duration=8.0)
delay_robot(1.0)
draw_circle(center=[200, 0], radius=40, height=150, duration=5.0)
```

### ç¤ºä¾‹ 4: ç»„è£…ä»»åŠ¡

```python
from Headless.robot_api import *

def pick_and_stack(objects_positions, stack_position, stack_height_increment=30):
    """
    ä»å¤šä¸ªä½ç½®æ‹¾å–ç‰©ä½“å¹¶å †å 
    """
    current_stack_height = 50  # åˆå§‹é«˜åº¦

    for i, obj_pos in enumerate(objects_positions):
        print(f"æ‹¾å–ç‰©ä½“ {i+1}/{len(objects_positions)}")

        # æ‰“å¼€å¤¹çˆª
        control_electric_gripper(action='open')

        # ç§»åŠ¨åˆ°ç‰©ä½“ä¸Šæ–¹
        approach_pos = obj_pos.copy()
        approach_pos[2] += 100
        move_robot_cartesian(approach_pos, duration=2.0)

        # ä¸‹é™æŠ“å–
        move_robot_cartesian(obj_pos, duration=1.5)
        control_electric_gripper(action='move', position=200, speed=80)
        delay_robot(1.0)

        # æŠ¬èµ·
        move_robot_cartesian(approach_pos, duration=1.5)

        # ç§»åŠ¨åˆ°å †å ä½ç½®ä¸Šæ–¹
        stack_approach = stack_position.copy()
        stack_approach[2] = current_stack_height + 100
        move_robot_cartesian(stack_approach, duration=3.0)

        # ä¸‹é™æ”¾ç½®
        place_pos = stack_position.copy()
        place_pos[2] = current_stack_height
        move_robot_cartesian(place_pos, duration=1.5)

        # æ¾å¼€
        control_electric_gripper(action='open')
        delay_robot(0.5)

        # æŠ¬èµ·
        move_robot_cartesian(stack_approach, duration=1.5)

        # æ›´æ–°å †å é«˜åº¦
        current_stack_height += stack_height_increment

    print("å †å å®Œæˆï¼")

# ä½¿ç”¨ç¤ºä¾‹
objects = [
    [200, 100, 50, 180, 0, 0],
    [200, -100, 50, 180, 0, 0],
    [250, 0, 50, 180, 0, 0]
]
stack_location = [150, 0, 50, 180, 0, 0]

home_robot()
pick_and_stack(objects, stack_location, stack_height_increment=25)
home_robot()
```

---

## ğŸ”§ æ‰‹çœ¼æ ‡å®šæµç¨‹

è§†è§‰å¼•å¯¼æ“ä½œéœ€è¦å…ˆè¿›è¡Œæ‰‹çœ¼æ ‡å®šï¼Œå°†ç›¸æœºåæ ‡ç³»ä¸æœºå™¨äººåæ ‡ç³»å¯¹é½ã€‚

### 1. ç”Ÿæˆæ ‡å®šæ¿

```bash
cd Headless/Vision
python generate_charuco_board.py
```
æ‰“å°ç”Ÿæˆçš„ ChArUco æ ‡å®šæ¿ï¼ˆA4 çº¸ï¼‰

### 2. æ‰§è¡Œæ ‡å®š

```bash
python calibrate_hand_eye.py
```

æŒ‰ç…§æç¤ºï¼š
1. å°†æ ‡å®šæ¿æ”¾åœ¨ç›¸æœºè§†é‡å†…
2. æœºå™¨äººè‡ªåŠ¨ç§»åŠ¨åˆ°å¤šä¸ªä½ç½®é‡‡é›†æ•°æ®
3. è‡ªåŠ¨è®¡ç®—æ‰‹çœ¼å˜æ¢çŸ©é˜µ
4. ä¿å­˜æ ‡å®šç»“æœåˆ° `Results/calibration/` ç›®å½•

### 3. éªŒè¯æ ‡å®š

```bash
python validate_calibration.py
```

æ£€æŸ¥æ ‡å®šç²¾åº¦ï¼Œåº”è¯¥è¾¾åˆ° Â±3mm ä»¥å†…

### 4. ä¼˜åŒ–æ ‡å®šï¼ˆå¯é€‰ï¼‰

```bash
python calibration_refinement.py
```

é€šè¿‡è¿­ä»£ä¼˜åŒ–æé«˜ç²¾åº¦

---

## âš™ï¸ é…ç½®è¯´æ˜

### ç½‘ç»œé…ç½®

å¦‚æœå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¸åœ¨åŒä¸€å°ç”µè„‘ï¼š

ç¼–è¾‘ `Headless/robot_api.py`:
```python
SERVER_IP = "192.168.1.100"  # æ”¹ä¸ºæœåŠ¡å™¨ IP
SERVER_PORT = 5001           # é»˜è®¤ç«¯å£
```

ç¡®ä¿é˜²ç«å¢™å…è®¸ UDP 5001 å’Œ 5002 ç«¯å£

### ç›¸æœºé…ç½®

ç¼–è¾‘ `Headless/Vision/vision_controller.py`:
```python
CAMERA_WIDTH = 640
CAMERA_HEIGHT = 480
CAMERA_FPS = 30
```

### è¿åŠ¨å‚æ•°è°ƒæ•´

ç¼–è¾‘ `Headless/Gemini/robot_vision_tools.py`:
```python
APPROACH_HEIGHT = 50      # æ¥è¿‘é«˜åº¦ (mm)
GRASP_HEIGHT = 100        # æŠ“å–åæŠ¬å‡é«˜åº¦ (mm)
SPEED_APPROACH = 40       # æ¥è¿‘é€Ÿåº¦ (%)
SPEED_GRASP = 20          # æŠ“å–é€Ÿåº¦ (%)
```

---

## ğŸ›¡ï¸ å®‰å…¨æ³¨æ„äº‹é¡¹

### ç¡¬ä»¶å®‰å…¨
1. âš ï¸ **æ€¥åœæŒ‰é’®**: ç¡®ä¿æ€¥åœæŒ‰é’®éšæ—¶å¯è§¦åŠ
2. âš ï¸ **å·¥ä½œç©ºé—´**: ä¿æŒå·¥ä½œåŒºåŸŸæ— éšœç¢ç‰©
3. âš ï¸ **ç”µæº**: ä½¿ç”¨ç¨³å®šçš„ç”µæºä¾›åº”
4. âš ï¸ **å›ºå®š**: ç¡®ä¿æœºå™¨äººåº•åº§å›ºå®šç‰¢å›º

### è½¯ä»¶å®‰å…¨
- âœ“ ç³»ç»Ÿè‡ªåŠ¨æ£€æŸ¥å…³èŠ‚é™ä½
- âœ“ è¿åŠ¨å‰éªŒè¯é€†è¿åŠ¨å­¦è§£
- âœ“ é€Ÿåº¦åŒæ­¥é˜²æ­¢è¶…é€Ÿ
- âœ“ æ€¥åœè§¦å‘ç«‹å³åœæ­¢æ‰€æœ‰è¿åŠ¨
- âœ“ å‘½ä»¤é˜Ÿåˆ—è‡ªåŠ¨æ¸…ç©º

### æ“ä½œè§„èŒƒ
1. é¦–æ¬¡ä½¿ç”¨å…ˆåœ¨ä½é€Ÿåº¦æµ‹è¯•
2. ç¡®è®¤å·¥ä½œç©ºé—´èŒƒå›´
3. è§‚å¯Ÿé¦–æ¬¡è¿åŠ¨è·¯å¾„
4. ä¿æŒç›‘æ§è¿è¡ŒçŠ¶æ€
5. å¼‚å¸¸æƒ…å†µç«‹å³æŒ‰æ€¥åœ

---

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. ä¸²å£è¿æ¥å¤±è´¥
**ç°è±¡**: `Serial port not found`

**è§£å†³**:
- Windows: æ£€æŸ¥è®¾å¤‡ç®¡ç†å™¨ä¸­çš„ COM ç«¯å£å·
- Linux: æ£€æŸ¥ `/dev/ttyUSB*` æˆ– `/dev/ttyACM*`
- æ›´æ–° `com_port.txt` æ–‡ä»¶ä¸­çš„ç«¯å£å·
- æ£€æŸ¥ä¸²å£æƒé™: `sudo usermod -a -G dialout $USER`

#### 2. UDP é€šä¿¡å¤±è´¥
**ç°è±¡**: å‘½ä»¤æ— å“åº”

**è§£å†³**:
- æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦å¯åŠ¨
- ç¡®è®¤ IP åœ°å€å’Œç«¯å£æ­£ç¡®
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
- æµ‹è¯•ç½‘ç»œè¿é€šæ€§: `ping æœåŠ¡å™¨IP`

#### 3. è¿åŠ¨å­¦æ±‚è§£å¤±è´¥
**ç°è±¡**: `IK solution not found`

**è§£å†³**:
- ç›®æ ‡ä½ç½®å¯èƒ½è¶…å‡ºå·¥ä½œç©ºé—´èŒƒå›´
- æ£€æŸ¥å§¿æ€è§’åº¦æ˜¯å¦åˆç†
- å°è¯•ä»å½“å‰ä½ç½®åˆ†æ­¥ç§»åŠ¨
- ä½¿ç”¨ `get_robot_pose()` æŸ¥çœ‹å¯è¾¾èŒƒå›´

#### 4. ç›¸æœºæ— æ³•å¯åŠ¨
**ç°è±¡**: `RealSense camera not found`

**è§£å†³**:
- æ£€æŸ¥ USB è¿æ¥ï¼ˆå»ºè®® USB 3.0ï¼‰
- æ›´æ–° RealSense é©±åŠ¨
- è¿è¡Œ `realsense-viewer` æµ‹è¯•ç›¸æœº
- æ£€æŸ¥ç›¸æœºæƒé™

#### 5. Gemini API é”™è¯¯
**ç°è±¡**: `API key invalid`

**è§£å†³**:
- æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„ API å¯†é’¥
- ç¡®è®¤ API å¯†é’¥æœªè¿‡æœŸ
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- éªŒè¯ API é…é¢

#### 6. æ ‡å®šç²¾åº¦å·®
**ç°è±¡**: æŠ“å–ä½ç½®åç§»

**è§£å†³**:
- é‡æ–°è¿›è¡Œæ‰‹çœ¼æ ‡å®š
- å¢åŠ æ ‡å®šé‡‡æ ·ç‚¹æ•°é‡
- ç¡®ä¿æ ‡å®šæ¿æ‰“å°æ¯”ä¾‹å‡†ç¡®
- ä½¿ç”¨ `validate_calibration.py` éªŒè¯
- å°è¯• `calibration_refinement.py` ä¼˜åŒ–

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| **æ§åˆ¶é¢‘ç‡** | 100 Hz |
| **å®šä½ç²¾åº¦** | Â±1 mm |
| **é‡å¤ç²¾åº¦** | Â±0.5 mm |
| **æœ€å¤§è´Ÿè½½** | 1.2 kg |
| **æœ€å¤§é€Ÿåº¦** | 100%ï¼ˆå…³èŠ‚ç›¸å…³ï¼‰|
| **å·¥ä½œåŠå¾„** | 100-400 mm |
| **å“åº”å»¶è¿Ÿ** | <50 ms (å±€åŸŸç½‘) |
| **è§†è§‰å¸§ç‡** | 30 fps |
| **Gemini å“åº”** | 1-3 ç§’ |

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### é€‚ç”¨åœºæ™¯
âœ… æ¡Œé¢ç‰©ä½“åˆ†æ‹£
âœ… è§†è§‰å¼•å¯¼è£…é…
âœ… è‡ªåŠ¨åŒ–æµ‹è¯•
âœ… æ•™å­¦æ¼”ç¤º
âœ… ç ”ç©¶å®éªŒ
âœ… åŸå‹å¼€å‘

### ä¸é€‚ç”¨åœºæ™¯
âŒ é«˜é€Ÿç”Ÿäº§çº¿ï¼ˆé€Ÿåº¦é™åˆ¶ï¼‰
âŒ ç²¾å¯†å¾®ç±³çº§åŠ å·¥
âŒ é‡è½½å·¥ä¸šåº”ç”¨
âŒ é•¿æ—¶é—´è¿ç»­è¿è¡Œï¼ˆå»ºè®®<4å°æ—¶/æ¬¡ï¼‰

---

## ğŸ”— ç›¸å…³èµ„æº

- **PAROL6 å®˜æ–¹**: https://github.com/PCrnjak/PAROL-commander-software
- **Discord ç¤¾åŒº**: https://discord.com/invite/prjUvjmGpZ
- **Gemini API**: https://ai.google.dev/gemini-api/docs
- **RealSense SDK**: https://github.com/IntelRealSense/librealsense
- **é—®é¢˜åé¦ˆ**: é¡¹ç›® Issues é¡µé¢

---

## ğŸ“„ è®¸å¯è¯

è¯·å‚è€ƒé¡¹ç›®æ ¹ç›®å½•çš„ LICENSE æ–‡ä»¶

---

## ğŸ™ è‡´è°¢

- PAROL6 åˆ›å»ºè€…åŠç¤¾åŒº
- Google Gemini AI å›¢é˜Ÿ
- Intel RealSense å›¢é˜Ÿ
- æ‰€æœ‰è´¡çŒ®è€…å’Œæµ‹è¯•è€…

---

## ğŸ“® è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼š
1. æäº¤ GitHub Issue
2. åŠ å…¥ PAROL6 Discord é¢‘é“
3. æŸ¥çœ‹è¯¦ç»† API æ–‡æ¡£ï¼š`API-Specific-README.md`

---

**ç¥ä½¿ç”¨æ„‰å¿«ï¼ğŸ¤–**
